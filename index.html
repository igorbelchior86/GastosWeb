
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<title>Controle 365 – Mobile tuned</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#f2f4f7;--panel:#fff;--panel-alt:#f7f9fc;
  --accent:#0066ff;--accent-hover:#0056d4;--danger:#d92d20;
  --text:#111827;--text-muted:#6b7280;--border:#d1d5db;--radius:8px;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:'Inter',sans-serif}
html{font-size:15px}
body{background:var(--bg);color:var(--text);padding:24px;display:flex;justify-content:center}
.wrapper{width:100%;max-width:960px}
.container{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);padding:20px;margin-bottom:20px}
h2{font-size:1.25rem;font-weight:600;margin-bottom:14px}

/* --- Form grid --- */
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.form-grid input,.form-grid select{width:100%;padding:10px;border:1px solid var(--border);border-radius:var(--radius);font-size:.9rem}
.form-grid button{grid-column:1/ -1;padding:12px;border:none;border-radius:var(--radius);background:var(--accent);color:#fff;font-weight:600;cursor:pointer}
.form-grid button:hover{background:var(--accent-hover)}

/* --- General buttons --- */
button.danger{background:var(--danger);color:#fff}
button.danger:hover{opacity:.9}

/* --- Table --- */
.table-wrapper{overflow-x:auto}
table{width:100%;min-width:620px;border-collapse:collapse;margin-top:12px;font-size:.8rem}
thead th{background:var(--panel-alt);text-align:left;padding:8px;font-weight:600}
th,td{border:1px solid var(--border);padding:6px}
td.negative{color:#b42318;font-weight:600}
td.positive{color:#027a48;font-weight:600}
td.saldo-neg{background:#fdeaea}
tr.month-header{background:var(--panel-alt);cursor:pointer}
tr.month-header:hover{background:#e8ecf3}

/* invoice collapsible */
details.invoice summary{cursor:pointer;list-style:none}
details.invoice summary::before{content:'▸';margin-right:6px}
details.invoice[open] summary::before{transform:rotate(90deg)}
.invoice{background:var(--panel-alt);padding:8px;border-radius:var(--radius);margin-bottom:6px}
.op-line{display:flex;align-items:center;gap:6px;margin-bottom:2px}
.op-ts{font-size:.7rem;color:var(--text-muted);margin-left:22px}
button.icon{background:none;border:none;font-size:1rem;color:var(--text-muted);padding:0 2px;cursor:pointer}
button.icon:hover{color:var(--accent-hover)}button.icon.danger:hover{color:var(--danger)}

/* --- Mobile-only tweaks --- */
@media(max-width:480px){
  html{font-size:14px}
  body{padding:12px}
  .container{padding:16px}
  .form-grid{grid-template-columns:1fr}
  .table-wrapper{overflow-x:scroll}
  /* esconde coluna Gastos dia para caber na largura */
  th:nth-child(3),td:nth-child(3){display:none}
}
</style>
</head>
<body>
<div class="wrapper">
  <div class="container">
    <h2>Lançar operação</h2>
    <div class="form-grid">
      <input id="desc" placeholder="Descrição">
      <input id="value" type="number" placeholder="Valor (- para despesa)">
      <select id="method"></select>
      <input id="opDate" type="date">
      <button id="addBtn">Adicionar</button>
    </div>
  </div>

  <div class="container">
    <details>
      <summary>Gerenciar cartões</summary>
      <div style="margin-top:12px">
        <div class="form-grid" style="grid-template-columns:repeat(auto-fit,minmax(130px,1fr));margin-bottom:8px">
          <input id="cardName" placeholder="Nome">
          <input id="cardClose" type="number" min="1" max="31" placeholder="Fechamento">
          <input id="cardDue" type="number" min="1" max="31" placeholder="Vencimento">
          <button id="addCardBtn">Adicionar</button>
        </div>
        <small style="color:var(--text-muted)">Fechamento define qual fatura recebe as compras.</small>
        <ul id="cardList" style="margin-top:10px"></ul>
      </div>
    </details>
  </div>

  <div class="container">
    <div style="display:flex;gap:12px;align-items:center;margin-bottom:10px" id="startGroup">
      <label for="startInput">Saldo inicial:</label>
      <input id="startInput" type="number" style="flex:1">
      <button id="setStartBtn" style="flex:0 0 72px">OK</button>
    </div>

    <div class="table-wrapper">
      <table id="dailyTable">
        <thead>
          <tr><th>Data</th><th>Descrição</th><th>Gasto</th><th>Saldo</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <button id="resetData" class="danger" style="margin-top:14px">Limpar TODOS os dados</button>
  </div>
</div>

<!-- Firebase logic identical to previous file left out for brevity -->
</body>
</html>
